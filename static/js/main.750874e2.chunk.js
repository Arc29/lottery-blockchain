(this["webpackJsonplottery-react"]=this["webpackJsonplottery-react"]||[]).push([[0],{148:function(e,t,a){e.exports=a(370)},153:function(e,t,a){},155:function(e,t,a){},165:function(e,t){},188:function(e,t){},190:function(e,t){},230:function(e,t){},232:function(e,t){},261:function(e,t){},370:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),s=a(142),c=a.n(s),o=(a(153),a(7)),i=a.n(o),u=a(143),l=a(144),p=a(146),m=a(145),d=a(147),y=(a(155),a(47)),f=a.n(y),h=new f.a(window.web3.currentProvider),w=a(69),b=w.address,v=w.abi,g=new h.eth.Contract(JSON.parse(v),b),E=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={manager:"",players:[],balance:"",value:"",lastWinner:""},a.updateParams=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(g.methods.getPlayers().call());case 2:return e=r.sent,r.next=5,i.a.awrap(h.eth.getBalance(g.options.address));case 5:return t=r.sent,r.next=8,i.a.awrap(g.methods.lastWinner().call());case 8:n=r.sent,a.setState({players:e,balance:t,lastWinner:n});case 10:case"end":return r.stop()}}))},a.onSubmit=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,i.a.awrap(h.eth.getAccounts());case 3:return t=n.sent,a.setState({message:"Waiting for transaction to process..."}),n.next=7,i.a.awrap(g.methods.enter().send({from:t[0],value:h.utils.toWei(a.state.value,"ether")}));case 7:a.setState({message:"Transaction completed successfully!"}),a.updateParams();case 9:case"end":return n.stop()}}))},a.onClick=function(e){var t;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(h.eth.getAccounts());case 2:return t=e.sent,a.setState({message:"Waiting for transaction to process..."}),e.next=6,i.a.awrap(g.methods.pickWinner().send({from:t[0]}));case 6:a.setState({message:"A winner has been selected!"}),a.updateParams();case 8:case"end":return e.stop()}}))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(g.methods.manager().call());case 2:e=t.sent,this.setState({manager:e}),this.updateParams();case 5:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return window.addEventListener("load",(function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=10;break}return window.web3=new f.a(window.ethereum),e.prev=2,e.next=5,i.a.awrap(window.ethereum.enable());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Permission denied!");case 10:case"end":return e.stop()}}),null,null,[[2,7]])})),r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,"Lottery Contract"),r.a.createElement("p",null,"This contract is managed by ",this.state.manager,".",r.a.createElement("br",null),"Currently ",this.state.players.length," players have entered and prize pool is ",h.utils.fromWei(this.state.balance,"ether")," ether.",r.a.createElement("br",null),"The last winner was ",this.state.lastWinner),r.a.createElement("hr",null),r.a.createElement("h4",null,"Try your luck!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",null,"Amount to enter:"),r.a.createElement("input",{value:this.state.value,onChange:function(t){e.setState({value:t.target.value})}}),r.a.createElement("button",null,"Enter")),r.a.createElement("hr",null),r.a.createElement("h4",null,"Ready to pick a winner?"),r.a.createElement("button",{onClick:this.onClick},"Pick a winner"),r.a.createElement("hr",null),r.a.createElement("br",null),this.state.message)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e){e.exports=JSON.parse('{"address":"0xaA20de9d97DA7169f87FB9DB5E37c1b2f5948e3C","abi":"[{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"manager\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"pickWinner\\",\\"outputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"getPlayers\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address[]\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"randomGenerator\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"enter\\",\\"outputs\\":[],\\"payable\\":true,\\"stateMutability\\":\\"payable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"players\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"lastWinner\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"inputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"constructor\\"}]"}')}},[[148,1,2]]]);
//# sourceMappingURL=main.750874e2.chunk.js.map